<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta content="" name="description" />
    <meta content="webthemez" name="author" />
    <title>BRILLIANT Free Bootstrap Admin Template</title>

    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
    <link href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css" rel="stylesheet">
    <script src="/js/layer/layer.js"></script>
    <!-- Bootstrap Styles-->
    <link href="/css/bootstrap.css" rel="stylesheet" />
    <!-- FontAwesome Styles-->
    <link href="/css/font-awesome.css" rel="stylesheet" />
    <!-- Morris Chart Styles-->
    <link href="/js/morris/morris-0.4.3.min.css" rel="stylesheet" />
    <!-- Custom Styles-->
    <link href="/css/custom-styles.css" rel="stylesheet" />
    <!-- Google Fonts-->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' />
    <link rel="stylesheet" href="/js/Lightweight-Chart/cssCharts.css">
    <!-- DATA TABLE SCRIPTS -->
    <script src="/js/dataTables/jquery.dataTables.js"></script>

    <script src="/js/dataTables/dataTables.bootstrap.js"></script>
    <!--<script src="/js/dataTables/fnReloadAjax.js"></script>-->

    <script type="text/javascript" src="/js/My97DatePicker/WdatePicker.js"></script>

    <script>

       $(function(){
           $.ajax({
               type: "post",
               contentType:"application/json",
               url: "http://localhost:8888/sumrecord/incomeType",
               success: function(data){
                   if(data.code=="1")
                   {
                       $.each(data.data,function (i,v) {
                           $("#IncomeType").append("<option value="+v.type+">"+v.desc+"</option>")
                       })
                   }
               }
           });

           $.ajax({
               type: "post",
               contentType:"application/json",
               url: "http://localhost:8888/sumrecord/sumtype",
               success: function(data){
                   if(data.code=="1")
                   {
                       $.each(data.data,function (i,v) {
                           $("#sumType").append("<option value="+v.type+">"+v.desc+"</option>")
                       })
                   }
               }
           });

           $.ajax({
               type: "post",
               contentType:"application/json",
               url: "http://localhost:8888/sumrecord/paytype",
               success: function(data){
                   if(data.code=="1")
                   {
                       $.each(data.data,function (i,v) {
                           $("#payType").append("<option value="+v.type+">"+v.desc+"</option>")
                       })
                   }
               }
           });

           $('#dataTables-example').DataTable({
               "ajax":"http://localhost:8888/sumrecord/list",
               "columns": [
                   { "data": 'sumFlagStr' },
                   { "data": 'sumTypeStr' },
                   { "data": 'payTypeStr' },
                   { "data": 'timestr' },
                   { "data": 'remark' },
                   { "data": 'sum' }
               ]
           });

           var table = $('#dataTables-example').DataTable();



           $('#dataTables-example tbody').on( 'click', 'tr', function () {
               if ( $(this).hasClass('selected') ) {
                   $(this).removeClass('selected');
               }
               else {
                   $('#dataTables-example').DataTable().$('tr.selected').removeClass('selected');
                   $(this).addClass('selected');
               }
           });

           $('#delete').click( function () {
               var item=$('#dataTables-example').DataTable().row('.selected').data();
               if(item==undefined)
               {
                   layer.msg("请选择要删除的项");
                   return;
               }

               layer.confirm('确定要删除么？', {
                   btn: ['确定','取消'] //按钮
               }, function(){
                   var index = layer.load(1, {
                       shade: [0.1,'#fff'] //0.1透明度的白色背景
                   });
                   $.ajax({
                       type: "post",
                       contentType:"application/json",
                       url: "http://localhost:8888/sumrecord/remove",
                       data: JSON.stringify({"id":item.id}),
                       success: function(data){
                           if(data.code=="1")
                           {
                               layer.msg("删除成功");
                               layer.close(index);
                               table.ajax.reload();
                           }else{
                               layer.msg("删除失败");
                           }
                       }
                   });
               }, function(){

               });
           } );


           $("#additem").click(function () {
               layer.open({
                   type: 1,
                   shade: false,
                   title: "新增消费", //不显示标题
                   content: $("#addform"), //捕获的元素，注意：最好该指定的元素要存放在body最外层，否则可能被其它的相对元素所影响
                   cancel: function(){

                   }
               });
           });


           $("#addbutton").click(function () {
               if($("#time").val()=="")
               {
                   layer.msg("请选择消费时间");
                   return;
               }
               if($("#remark").val()=="")
               {
                   layer.msg("请填写消费描述");
                   return;
               }
               if($("#sum").val()=="")
               {
                   layer.msg("请填写金额");
                   return;
               }
               $.ajax({
                   url : "http://localhost:8888/sumrecord/insert",
                   type : 'post',
                   data:JSON.stringify({sum:$("#sum").val(),sumFlag:$("#sumFlag").val(),payType:$("#payType").val(),
                       remark:$("#remark").val(),time:$("#time").val(),sumType:$("#sumType").val()}),
                   contentType : 'application/json;charset=UTF-8',
                   success : function(result) {
                       layer.msg("添加成功");
                       $(".layui-layer-close1").click();
                       table.ajax.reload();
                   },
                   error : function() {
                       layer.msg("添加失败");
                   }
               });
           });

           $("#edit").click(function () {
               var item=$('#dataTables-example').DataTable().row('.selected').data();
               if(item==undefined)
               {
                   layer.msg("请选择要编辑的项");
                   return;
               }

               layer.open({
                   type: 1,
                   shade: false,
                   title: "编辑消费", //不显示标题
                   content: $("#addform"), //捕获的元素，注意：最好该指定的元素要存放在body最外层，否则可能被其它的相对元素所影响
                   cancel: function(){

                   }
               });
           });

       });




    </script>
    <style>
        .dataTables_info{
            display: none;
        }
        .dataTables_filter{
            float: right;
            margin-bottom: 10px;
        }
        .dataTables_length{
            display: none;
        }
        #dataTables-example_paginate{
            float: right;
        }
        .dataTables_filter{
            display: none;
        }

        .additem{
            float: right;
            margin-bottom: 10px;
            margin-right: 5px;
        }

        #edit{
            float: right;
            margin-bottom: 10px;
            margin-right: 5px;
        }

        #delete{
            float: right;
            margin-bottom: 10px;
        }

        .table-responsive{
            overflow-x: hidden;
        }



    </style>
</head>

<body>
    <div id="wrapper">
        <nav class="navbar navbar-default top-navbar" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".sidebar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://localhost:8888/page/index"><strong><i class="icon fa fa-plane"></i>     智慧家庭系统</strong></a>

                <div id="sideNav" href="">
		<i class="fa fa-bars icon"></i> 
		</div>
            </div>

            <ul class="nav navbar-top-links navbar-right">
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                        <i class="fa fa-envelope fa-fw"></i> <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-messages">
                        <li>
                            <a href="#">
                                <div>
                                    <strong>John Doe</strong>
                                    <span class="pull-right text-muted">
                                        <em>Today</em>
                                    </span>
                                </div>
                                <div>Lorem Ipsum has been the industry's standard dummy text ever since the 1500s...</div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <strong>John Smith</strong>
                                    <span class="pull-right text-muted">
                                        <em>Yesterday</em>
                                    </span>
                                </div>
                                <div>Lorem Ipsum has been the industry's standard dummy text ever since an kwilnw...</div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <strong>John Smith</strong>
                                    <span class="pull-right text-muted">
                                        <em>Yesterday</em>
                                    </span>
                                </div>
                                <div>Lorem Ipsum has been the industry's standard dummy text ever since the...</div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a class="text-center" href="#">
                                <strong>Read All Messages</strong>
                                <i class="fa fa-angle-right"></i>
                            </a>
                        </li>
                    </ul>
                    <!-- /.dropdown-messages -->
                </li>
                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                        <i class="fa fa-tasks fa-fw"></i> <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-tasks">
                        <li>
                            <a href="#">
                                <div>
                                    <p>
                                        <strong>Task 1</strong>
                                        <span class="pull-right text-muted">60% Complete</span>
                                    </p>
                                    <div class="progress progress-striped active">
                                        <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%">
                                            <span class="sr-only">60% Complete (success)</span>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <p>
                                        <strong>Task 2</strong>
                                        <span class="pull-right text-muted">28% Complete</span>
                                    </p>
                                    <div class="progress progress-striped active">
                                        <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="28" aria-valuemin="0" aria-valuemax="100" style="width: 28%">
                                            <span class="sr-only">28% Complete</span>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <p>
                                        <strong>Task 3</strong>
                                        <span class="pull-right text-muted">60% Complete</span>
                                    </p>
                                    <div class="progress progress-striped active">
                                        <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%">
                                            <span class="sr-only">60% Complete (warning)</span>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <p>
                                        <strong>Task 4</strong>
                                        <span class="pull-right text-muted">85% Complete</span>
                                    </p>
                                    <div class="progress progress-striped active">
                                        <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="85" aria-valuemin="0" aria-valuemax="100" style="width: 85%">
                                            <span class="sr-only">85% Complete (danger)</span>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a class="text-center" href="#">
                                <strong>See All Tasks</strong>
                                <i class="fa fa-angle-right"></i>
                            </a>
                        </li>
                    </ul>
                    <!-- /.dropdown-tasks -->
                </li>
                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                        <i class="fa fa-bell fa-fw"></i> <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-alerts">
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-comment fa-fw"></i> New Comment
                                    <span class="pull-right text-muted small">4 min</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-twitter fa-fw"></i> 3 New Followers
                                    <span class="pull-right text-muted small">12 min</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-envelope fa-fw"></i> Message Sent
                                    <span class="pull-right text-muted small">4 min</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-tasks fa-fw"></i> New Task
                                    <span class="pull-right text-muted small">4 min</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-upload fa-fw"></i> Server Rebooted
                                    <span class="pull-right text-muted small">4 min</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a class="text-center" href="#">
                                <strong>See All Alerts</strong>
                                <i class="fa fa-angle-right"></i>
                            </a>
                        </li>
                    </ul>
                    <!-- /.dropdown-alerts -->
                </li>
                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                        <i class="fa fa-user fa-fw"></i> <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        <li><a href="#"><i class="fa fa-user fa-fw"></i> User Profile</a>
                        </li>
                        <li><a href="#"><i class="fa fa-gear fa-fw"></i> Settings</a>
                        </li>
                        <li class="divider"></li>
                        <li><a href="#"><i class="fa fa-sign-out fa-fw"></i> Logout</a>
                        </li>
                    </ul>
                    <!-- /.dropdown-user -->
                </li>
                <!-- /.dropdown -->
            </ul>
        </nav>
        <!--/. NAV TOP  -->
        <nav class="navbar-default navbar-side" role="navigation">
            <div class="sidebar-collapse">
                <ul class="nav" id="main-menu">

                    <li>
                        <a class="active-menu" href="http://localhost:8888/page/index"><i class="fa fa-dashboard"></i>家庭账本</a>
                    </li>
                    <li>
                        <a href="http://localhost:8888/page/report"><i class="fa fa-desktop"></i> 报表</a>
                    </li>
                    <li>
                        <a href="http://localhost:8888/page/chat"><i class="fa fa-desktop"></i> 聊天室</a>
                    </li>
                    <!--<li>-->
                        <!--<a href="ui-elements.html"><i class="fa fa-desktop"></i> 照片</a>-->
                    <!--</li> -->
					 <!---->
					 <!--<li>-->
                        <!--<a href="#"><i class="fa fa-sitemap"></i> 大事件<span class="fa arrow"></span></a>-->
                        <!--<ul class="nav nav-second-level">-->
                            <!--<li>-->
                                <!--<a href="chart.html">Charts JS</a>-->
                            <!--</li>-->
                            <!--<li>-->
                                <!--<a href="morris-chart.html">Morris Chart</a>-->
                            <!--</li>-->
							<!--</ul>-->
                     <!--</li>-->
							<!---->
                    <!--<li>-->
                        <!--<a href="tab-panel.html"><i class="fa fa-qrcode"></i> Tabs & Panels</a>-->
                    <!--</li>-->
                    <!---->
                    <!--<li>-->
                        <!--<a href="table.html"><i class="fa fa-table"></i> Responsive Tables</a>-->
                    <!--</li>-->
                    <!--<li>-->
                        <!--<a href="form.html"><i class="fa fa-edit"></i> Forms </a>-->
                    <!--</li>-->


                    <!--<li>-->
                        <!--<a href="#"><i class="fa fa-sitemap"></i> Multi-Level Dropdown<span class="fa arrow"></span></a>-->
                        <!--<ul class="nav nav-second-level">-->
                            <!--<li>-->
                                <!--<a href="#">Second Level Link</a>-->
                            <!--</li>-->
                            <!--<li>-->
                                <!--<a href="#">Second Level Link</a>-->
                            <!--</li>-->
                            <!--<li>-->
                                <!--<a href="#">Second Level Link<span class="fa arrow"></span></a>-->
                                <!--<ul class="nav nav-third-level">-->
                                    <!--<li>-->
                                        <!--<a href="#">Third Level Link</a>-->
                                    <!--</li>-->
                                    <!--<li>-->
                                        <!--<a href="#">Third Level Link</a>-->
                                    <!--</li>-->
                                    <!--<li>-->
                                        <!--<a href="#">Third Level Link</a>-->
                                    <!--</li>-->

                                <!--</ul>-->

                            <!--</li>-->
                        <!--</ul>-->
                    <!--</li>-->
                    <!--<li>-->
                        <!--<a href="empty.html"><i class="fa fa-fw fa-file"></i> Empty Page</a>-->
                    <!--</li>-->
                </ul>

            </div>

        </nav>
        <!-- /. NAV SIDE  -->
      
		<div id="page-wrapper">
            <div id="page-inner">

                <!-- /. ROW  -->
                <div class="row">
                    <div class="col-md-3 col-sm-12 col-xs-12">
					<div class="board">
                        <div class="panel panel-primary">
						<div class="number">
							<h3>
								<h3>时间</h3>
                                <small>2018-5-13</small>
							</h3>
						</div>
						<div class="icon">
						   <i class="fa fa-eye fa-5x red"></i>
						</div>
                        </div>
						</div>
                    </div>
                    <div class="col-md-3 col-sm-12 col-xs-12">
					<div class="board">
                        <div class="panel panel-primary">
						<div class="number">
							<h3>
								<h3>收入(元)</h3>
								<small>2000</small>
							</h3> 
						</div>
						<div class="icon">
						   <i class="fa fa-shopping-cart fa-5x blue"></i>
						</div>

                        </div>
						</div>
                    </div>
					
                    <div class="col-md-3 col-sm-12 col-xs-12">
					<div class="board">
                        <div class="panel panel-primary">
						<div class="number">
							<h3>
								<h3>支出(元)</h3>
								<small>1000</small>
							</h3> 
						</div>
						<div class="icon">
						   <i class="fa fa-comments fa-5x green"></i>
						</div>
		 
                        </div>
						</div>
                    </div>
                    <div class="col-md-3 col-sm-12 col-xs-12">
                        <div class="board">
                            <div class="panel panel-primary">
                            <div class="number">
                                <h3>
                                    <h3>结余</h3>
                                    <small>1000</small>
                                </h3>
                            </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Advanced Tables -->
                <div class="panel panel-default">
                    <div class="panel-heading">
                    </div>
                    <div class="panel-body">
                        <div>
                            <form class="form-inline">
                                <div class="form-group">
                                    <input id="selecttime" name="selecttime" type="text" onclick="WdatePicker()">
                                </div>
                                <button type="submit" class="btn btn-success">查询</button>
                            </form>
                        </div>

                        <div class="table-responsive">
                            <table class="table table-striped table-bordered table-hover" id="dataTables-example">
                                <a href="#" class="btn btn-primary" id="delete">删除</a>
                                <a href="#" class="btn btn-primary" id="edit">编辑</a>
                                <a class="btn btn-primary additem" id="additem">记一笔</a>

                                <thead>
                                <tr class="success">
                                    <th>收入/支出</th>
                                    <th>消费类型</th>
                                    <th>支付类型</th>
                                    <th>时间</th>
                                    <th>描述</th>
                                    <th>金额</th>
                                </tr>
                                </thead>
                                <tbody>

                                </tbody>
                            </table>
                        </div>

                    </div>
                </div>
                <!--End Advanced Tables -->
            </div>
            <!-- /. PAGE INNER  -->
        </div>
        <!-- /. PAGE WRAPPER  -->
    </div>
    <!-- /. WRAPPER  -->
    <!-- JS Scripts-->
    <!-- jQuery Js -->

    <!-- Bootstrap Js -->
    <script src="/js/bootstrap.min.js"></script>
	 
    <!-- Metis Menu Js -->
    <script src="/js/jquery.metisMenu.js"></script>
    <!-- Morris Chart Js -->
    <script src="/js/morris/raphael-2.1.0.min.js"></script>
    <script src="/js/morris/morris.js"></script>
	
	
	<script src="/js/easypiechart.js"></script>
	<script src="/js/easypiechart-data.js"></script>
	
	 <script src="/js/Lightweight-Chart/jquery.chart.js"></script>
	
    <!-- Custom Js -->
    <script src="/js/custom-scripts.js"></script>

      
    <!-- Chart Js -->
    <script type="text/javascript" src="/js/chart.min.js"></script>
    <script type="text/javascript" src="/js/chartjs.js"></script>
</body>

<div id="addform" style="width: 300px;height: 420px;display: none">
    <form class="form-inline" style="padding: 20px;" method="post" th:action="@{/sumrecord/insert}" target="nm_iframe">
        <div class="form-group">
            <label>收入/支出：</label>
            <select name="sumFlag" id="sumFlag">
                <option value="1">收入</option>
                <option value="2">支出</option>
            </select>
        </div>
        <div class="form-group" style="margin-top: 10px">
            <label>消费时间：</label>
            <input id="time" name="time" type="text" onclick="WdatePicker()">
        </div>
        <div class="form-group" style="margin-top: 10px">
            <label>消费类型：</label>
            <select name="sumType" id="sumType">
            </select>
        </div>
        <br/>
        <div class="form-group" style="margin-top: 10px">
            <label>收入类型：</label>
            <select name="IncomeTypeEnum" id="IncomeType">
            </select>
        </div>
        <br/>
        <div class="form-group" style="margin-top: 10px">
            <label>支付类型：</label>
            <select name="payType" id="payType">
            </select>
        </div>
        <br/>
        <div class="form-group" style="margin-top: 10px">
            <label>消费描述：</label>
            <textarea id="remark" name="remark" style="height: 100px;"></textarea>
        </div>
        <div class="form-group" style="margin-top: 10px">
            <label>消费金额：</label>
            <input id="sum" name="sum"/>
        </div>
        <div style="margin-top: 10px;margin-left: 40%"><button type="button" class="btn btn-default" id="addbutton">提交</button></div>
    </form>
</div>
<iframe id="id_iframe" name="nm_iframe" style="display:none;"></iframe>
</html>